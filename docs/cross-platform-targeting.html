<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Cross-platform Targeting | The Book of .NET OSS </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Cross-platform Targeting | The Book of .NET OSS ">
    <meta name="generator" content="docfx 2.38.1.0">
    
    <link rel="shortcut icon" href="../images/favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    
  
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-98352-5"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
  
      gtag('config', 'UA-98352-5');
    </script>
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../images/logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="cross-platform-targeting">Cross-platform Targeting</h1>

<p>The modern .NET ecosystem supports multiple operating systems and devices. It is important for .NET OSS projects to support as wide a range of developers as possible, whether they are building an ASP.NET website hosted in Azure, or a .NET game in Unity.</p>
<p>There are two main ways to add cross-platform support to a .NET library:</p>
<ol>
<li><strong>Target .NET implementations individually</strong> and include multiple assemblies in a NuGet package. This leverages NuGet's ability to have multiple assemblies in a package and select the best one when added to an application.</li>
<li><strong>Target .NET Standard</strong>, a specification for .NET APIs available on all .NET implementations. The single .NET Standard assembly supports multiple .NET implementations. A great benefit of .NET Standard is that new .NET implementations will automatically be supported by your library without any modification.</li>
</ol>
<p>You can also combine these two approaches. For example, a <code>netstandard2.0</code> target could be the default implementation and you could provide a .NET implementation specific target that uses implementation specific APIs for additional features. NuGet will automatically select the implementation specific target when possible, e.g. a .NET Core application will use the <code>netcoreapp2.0</code> assembly over the <code>netstandard2.0</code> assembly.</p>
<p><img src="../images/nuget-package-multiple-assemblies.png" alt="NuGet package with multiple assemblies" title="NuGet package with multiple assemblies"></p>
<p><strong>✔️ DO</strong> use a modern .NET Class Library together with the <code>TargetFrameworks</code> if you want to build multiple targets.</p>
<pre><code class="lang-xml">&lt;Project Sdk=&quot;Microsoft.NET.Sdk&quot;&gt;
  &lt;PropertyGroup&gt;
    &lt;!-- This project will output netstandard2.0 and net471 assemblies --&gt;
    &lt;TargetFrameworks&gt;netstandard2.0;net471&lt;/TargetFrameworks&gt;
  &lt;/PropertyGroup&gt;
&lt;/Project&gt;
</code></pre>
<p><strong>❌ AVOID</strong> targeting .NET implementations and .NET Standard when the .NET implementation is functionally the same.</p>
<blockquote>
<p>The .NET Standard assembly will automatically be used by NuGet. Targeting .NET implementations increases the <code>*.nupkg</code> size for no benefit.</p>
</blockquote>
<p><strong>More Information</strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/dotnet/standard/frameworks">.NET target frameworks</a></li>
<li><a href="https://weblog.west-wind.com/posts/2017/Jun/22/MultiTargeting-and-Porting-a-NET-Library-to-NET-Core-20">Multi-Targeting and Porting a .NET Library to .NET Core 2.0</a></li>
</ul>
<h2 id="net-standard">.NET Standard</h2>
<p>The .NET Standard is a specification of .NET APIs that are available on all .NET implementations. Targeting a .NET Standard lets you produce a library that is usable by all platforms that support that version of .NET Standard.</p>
<p><img src="../images/platforms-netstandard.png" alt=".NET Standard" title=".NET Standard"></p>
<p>Targeting .NET Standard, and successfully compiling your project, does not guarantee the library will run successfully on all platforms:</p>
<ol>
<li>Platform specific APIs will fail on other platforms, e.g. <code>Microsoft.Win32.Registry</code> will succeed on Windows and throw <code>PlatformNotSupportedException</code> when used on any other OS.</li>
<li>APIs can behave differently, e.g. reflection APIs have different performance characteristics when an application uses ahead-of-time compilation on iOS or UWP.</li>
</ol>
<p><strong>✔️ CONSIDER</strong> including a <code>netstandard2.0</code> target.</p>
<blockquote>
<p>.NET Standard 2.0 is supported by all modern platforms and is the recommended way to support multiple platforms with one target.</p>
</blockquote>
<p><strong>❌ AVOID</strong> including a <code>netstandard1.x</code> target.</p>
<blockquote>
<p>A .NET Standard 1.x target has a large package dependency graph and will download a lot of packages. Modern .NET platforms, including .NET Framework 4.6.1, UWP and Xamarin, all support .NET Standard 2.0. You should only target .NET Standard 1.x if you specifically need to target an older platform.</p>
</blockquote>
<div class="TIP">
<h5>Tip</h5>
<p>If you do have a 1.x target then also include a 2.0 target. Modern platforms will use the 2.0 target and older platforms will fall back to 1.x.</p>
</div>
<p><strong>❌ DO NOT</strong> include a .NET Standard target if the library relies on a platform specific app model.</p>
<blockquote>
<p>For example, a UWP control toolkit library depends on an app model that is only available on UWP. App model specific APIs will not be available in .NET Standard.</p>
</blockquote>
<p><strong>More Information</strong></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/dotnet/standard/net-standard">.NET Standard</a></li>
</ul>
<h2 id="older-targets">Older Targets</h2>
<p>.NET supports targeting versions of the .NET Framework that are long out of support, e.g. .NET 2.0, as well as platforms that are no longer commonly used, e.g. Silverlight and Windows Phone. The value of targeting such old platforms can be easily outweighed by the overhead of programming around missing APIs.</p>
<p><strong>❌ DO NOT</strong> include a Portable Class Library (PCL) target, e.g. <code>portable-net45+win8+wpa81+wp8</code>.</p>
<blockquote>
<p>.NET Standard is the modern way to support cross-platform .NET libraries and replace PCLs.</p>
</blockquote>
<p><strong>❌ DO NOT</strong> include targets for .NET platforms that are no longer supported, e.g. <code>SL4</code>, <code>WP</code>.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/JamesNK/BookOfDotNetOSS/blob/master/docs/cross-platform-targeting.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
             
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
